File_Manager:
  type: world
  debug: true
  events:
    on player login:
    - if <server.has_file[/Players/<player.uuid>.yml]> {
      - yaml "load:/Players/<player.uuid>.yml" id:<player.uuid>
    }
    else {
      - yaml create id:<player.uuid>
      - yaml id:<player.uuid> set General.Mana:0
    }
    on player quits:
    - yaml "savefile:/Players/<player.uuid>.yml" id:<player.uuid>
    - yaml unload id:<player.uuid>
    on shutdown:
    - foreach <server.list_online_players> {
      - yaml "savefile:/Players/<def[value].uuid>.yml" id:<def[value].uuid>
    }
    on system minutely:
    - foreach <server.list_online_players> {
      - yaml "savefile:/Players/<player.uuid>.yml" id:<player.uuid>
    }

Skill_Limit_Check:
  type: task
  debug: true
  speed: 0
  script:
  - foreach <yaml[<player.uuid>].list_keys[<player.flag[Class]>.Skills]> {
    - define Check 0
    - if <yaml[<player.uuid>].read[<player.flag[Class]>.Skills.<def[value]>]> == 1 {
      - define Check <def[Check].add[1]>
    }
  }
  - if <def[Check]> > 3 {
    - narrate "<&a><&l>[Class] <&7>You already have <&f>3 <&7>optional skills selected!"
    - queue clear
  }